<div class="uk-text-right">
  <UkButton
    data-test-new-form
    @on-click={{optional @on-new-form}}
    @label={{t "caluma.form-builder.form.new"}}
  />
</div>

{{#if this.forms.isRunning}}
  <div class="uk-height-small uk-flex uk-flex-center uk-flex-middle">
    {{uk-spinner ratio=2}}
  </div>
{{else}}
  {{#if this.forms.lastSuccessful.value.length}}
    <ul data-test-form-list class="uk-list uk-list-divider uk-list-large">
      {{#each this.forms.lastSuccessful.value key="node.id" as |item|}}
        {{cfb-form-list/item
          data-test-form-list-item=item.node.slug
          item=item.node
          on-edit-form=on-edit-form
        }}
      {{/each}}
    </ul>
  {{else}}
    <div
      data-test-form-list-empty
      class="uk-padding-large uk-padding-remove-horizontal uk-text-center"
    >
      {{uk-icon "search" ratio=10}}
      <p class="uk-text-muted">{{t "caluma.form-builder.form.empty"}}</p>
    </div>
  {{/if}}
{{/if}}

<div data-test-show-archived {{on "click" this.toggleArchived}} class="uk-flex uk-flex-middle cfb-pointer" title="{{t "caluma.form-builder.form.showArchived"}}" role="button">
  <span uk-icon={{if this.showArchived "minus" "plus"}} class="uk-margin-small-right"></span>
  <span>{{t "caluma.form-builder.form.archived"}}</span>
</div>
{{#if this.forms.isRunning}}
  <div class="uk-height-small uk-flex uk-flex-center uk-flex-middle">
    {{uk-spinner ratio=1}}
  </div>
{{else}}
  {{#if this.showArchived}}
    {{#if this.formsArchived.lastSuccessful.value.length}}
      <ul data-test-archived-form-list class="uk-list uk-list-divider uk-list-large">
        {{#each this.formsArchived.lastSuccessful.value key="node.id" as |item|}}
          {{cfb-form-list/item
            data-test-archived-form-list-item=item.node.slug
            item=item.node
            on-edit-form=on-edit-form
          }}
        {{/each}}
      </ul>
    {{else}}
      <div
        class="uk-padding-large uk-padding-remove-horizontal uk-text-center"
      >
        <p class="uk-text-muted">{{t "caluma.form-builder.form.emptyArchived"}}</p>
      </div>
    {{/if}}
  {{/if}}
{{/if}}
