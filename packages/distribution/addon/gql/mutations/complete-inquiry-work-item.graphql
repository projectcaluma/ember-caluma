# import InquiryAnswer, InquiryAnswerButtons, InquiryAnswerStatus from '../fragments/inquiry-answer.graphql'

mutation CompleteInquiryWorkItem(
  $workItem: ID!
  $statusQuestion: ID!
  $buttonTasks: [String]!
  $checkTask: ID!
  $currentGroup: String!
  $answerInfoQuestions: [ID]!
) {
  completeWorkItem(input: { id: $workItem }) {
    workItem {
      id
      status
      case {
        id
        document {
          id
          ...InquiryAnswer
        }
        ...InquiryAnswerButtons
        parentWorkItem {
          id
          status
          isRedoable
          # This is needed to remove the check inquiries button if that work
          # item is closed automatically after completing an inquiry.
          case {
            id
            workItems(
              filter: [
                { task: $checkTask }
                { addressedGroups: [$currentGroup] }
              ]
            ) {
              edges {
                node {
                  id
                  status
                }
              }
            }
          }
        }
      }
    }
  }
}
